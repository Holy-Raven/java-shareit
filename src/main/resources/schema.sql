CREATE TABLE IF NOT EXISTS users (
	id 				BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
	name 			VARCHAR(200) NOT NULL,
	email 			VARCHAR (400) NOT NULL,
	CONSTRAINT constraint_user UNIQUE (email)
);

CREATE TABLE IF NOT EXISTS requests (
	id 				BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
	description 	VARCHAR (2000) NOT NULL,
	requester_id 	BIGINT REFERENCES users (id) ON DELETE RESTRICT,
	created 		TIMESTAMP WITHOUT TIME ZONE NOT NULL
);

CREATE TABLE IF NOT EXISTS items (
	id 				BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
	name 			VARCHAR(200) NOT NULL,
	description		VARCHAR (2000) NOT NULL,
	is_available	BOOLEAN NOT NULL DEFAULT FALSE,
	owner_id 		BIGINT REFERENCES users (id) ON DELETE RESTRICT,
	request_id 		BIGINT REFERENCES requests (id) ON DELETE RESTRICT

);

CREATE TABLE IF NOT EXISTS bookings (
	id		BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
	start_date 	TIMESTAMP WITHOUT TIME ZONE NOT NULL,
	end_date 	TIMESTAMP WITHOUT TIME ZONE NOT NULL,
	item_id 	BIGINT REFERENCES items (id) ON DELETE RESTRICT,
	booker_id 	BIGINT REFERENCES users (id) ON DELETE RESTRICT,
	status 		VARCHAR (100) NOT NULL
);

CREATE TABLE IF NOT EXISTS comments (

	id 		BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
	text 		VARCHAR (4000) NOT NULL,
	item_id 	BIGINT REFERENCES items (id) ON DELETE RESTRICT,
	author_id  	BIGINT REFERENCES users (id) ON DELETE RESTRICT
);


